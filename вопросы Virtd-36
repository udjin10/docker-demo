21.11.2023 13:25:00	khoroshevlv@gmail.com	VIRTD-36	Леонид Хорошев	Оркестрация группой Docker контейнеров на примере Docker Compose	Вопрос к заданию 3. С помощью Ansible и Docker Compose разверните на виртуальной машине из предыдущего задания систему мониторинга на основе Prometheus/Grafana. В примере к заданиям показан вариант установки программного обеспечения (Docker) на ОС Centos-7. Если делать по аналогии - все проходит "на ура", но при работе с deb пакетами начинаются проблемы при установке GPG-ключа и добавления нужного репозитория 	"Мой вариант решения:
```
- name: Add gpg-keys
  command: sudo install -m 0755 -d /etc/apt/keyrings
  command: curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
  command: sudo chmod a+r /etc/apt/keyrings/docker.gpg

- name: Add the repository to Apt sources
  command: echo ""deb [arch=""$(dpkg --print-architecture)"" signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian bullseye oldstable"" /
      | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
  command: sudo apt update
```
Почему-то именно в плейбуке данный вариант не работает, но если выполнять все команды вручную, то все получается. Вопрос, что не так с данным разделом? ссылка на полное ДЗ на всякий случай https://github.com/LeonidKhoroshev/virtd-homeworks/blob/main/05-virt-04-docker-compose/README.md"	

Подсветить про shell&command


21.11.2023 13:30:41	khoroshevlv@gmail.com	VIRTD-36	Леонид Хорошев	Оркестрация кластером Docker контейнеров на примере Docker Swarm	Насколько часто Docker Swarm используется в реальных коммерческих проектах (часто имеется ввиду относительно Kubernetes)?  И вообще сейчас существует ли возможность оркестрации docker-контейнеров через Kuber. 	Kuber мы проходили где-то полгода назад и тогда с докером он у меня в итоге так и не за работал, в домашних заданиях приходилось использовать cri-o.	


22.11.2023 13:25:30	maliutinv@yanndex.ru	VIRTD-36	Малютин Вячеслав	Виртуализация	Есть-ли какие-то исследования, тесты, практика, методики, которые оценивают или позволяют оценить эффективность утилизации инфраструктуры (берем только вычислительную инфраструктуру) при применении разных типов виртуализации для одинакового окружения, назначения и нагрузке виртуальных машин?		

Ответ: 
```
Практика такая что все версии всего в ансибле пинятся
И чтоб ничо никогда б само не апдейтилось
Вторая распространенная практика -- время от времени катать плейбуку на чистый хост(вообще нулевый) и тестировать
Потому что а. декларативность ансибла сильно преувеличена и б. То что плейбука работает на проде вообще не значит что на чистом хосте все заработает
```
https://habr.com/ru/articles/323472/



22.11.2023 13:26:33	maliutinv@yandex.ru	VIRTD-36	Малютин Вячеслав	Виртуализация	Какие OpenSource технологии виртуализации и гипервизоров актуальны и развиваются в данный момент? Особенно интересует 
актуальность в РФ.

https://www.cnews.ru/reviews/virtual2023/review_table/f48060ea2e7a396a478146f4b16dd2e4db83da92


22.11.2023 13:27:23	maliutinv@yandex.ru	VIRTD-36	Малютин Вячеслав	IaaC	Как не скатиться в «автоматизацию ради автоматизации»? Бизнес – это в первую очередь извлечение прибыли, а чем больше себестоимость, тем меньше прибыли. Как понять и определить разумную грань применения подхода IaaC для разных типов инфраструктур? Этот подход очень эффективно работает в «облаках», но при использовании bare-metal или виртуализации с использованием VMWare/Hyper-V есть свои особенности и нюансы. Например, для разворачивания какой-то среды/окружения в VMWare должны быть заранее подготовлены шаблоны виртуальных машин. Этот процесс сложно автоматизировать и описать кодом. Точнее можно, но насколько разумно потратить большое количество ресурсов (человеко-часов) для автоматизации этих процессов, когда бизнес связан с разработкой приложений, а не с предоставлением услуг дата-центра?

Либо out-of-box решение гипервизора, либо terraform.


22.11.2023 13:28:04	maliutinv@yandex.ru	VIRTD-36	Малютин Вячеслав	IaaC	Сопровождение и поддержание в актуальном состоянии инфраструктуры. Мало создать среду/окружение, необходимо еще и поддерживать ее в актуальном состоянии. При использовании инструментов типа Ansible используется декларативный подход к описанию конфигураций и для некоторых системных и прикладных сервисов нужно фактически написать полностью конфигурационные файлы и хранить их в виде шаблонов. Сервисы периодически обновляются и некоторые параметры/опции меняют свое название или переходят в состояние deprecated. Какие методики и практики имеются, чтобы выстроить процессы обновления шаблонов конфигураций, хранящихся в Ansible? Какие практики используются для тестирования корректности «кода инфраструктуры» при выходе обновлений операционных систем или их компонентов (хотя-бы применительно к Linux)?		



22.11.2023 13:28:47	maliutinv@yandex.ru	VIRTD-36	Малютин Вячеслав	IaaC	Какие варианты хранения «кода инфраструктуры» есть (например, в репозитории прикладного приложения/проекта или в отдельном репозитории и т.д.)? Какие у них плюсы и минусы? Как выбрать подходящий вариант (какими критериями руководствоваться) для того или иного проекта (используемого стека)? Хотелось-бы услышать примеры из практики.


22.11.2023 18:02:22	maliutinv@yandex.ru	VIRTD-36	Малютин Вячеслав	Docker	Можно немного подробнее рассказать на вебинаре про miltistage build и переиспользование слоев Docker-контейнеров?



22.11.2023 22:40:38	maliutinv@mail.ru	VIRTD-36	Малютин Вячеслав	Кластер Docker Swarm	Можно-ли в кластере Docker Swarm делать несколько реплик сервисов БД (для примера возьмем MySQL или PostgreSQL), но чтобы они использовали общее хранилище? Если можно, то как? И где и как необходимо размещать том (volume), который подключается к контейнеру с сервисом БД?				